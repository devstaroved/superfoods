<!-- section 4 WHO BENEFITS -->

<section class="block__four__spirulina container">
    <div class="block__four__header">
        <h2 class="block__four__title title_mob">КОМУ БУДЕ <br><span class="color__green title_mob">КОРИСНА
                хлорела</span>
        </h2>

        <div class="block__four__sub">
            <p class="block__four__desc">Хлорела — одна з найпоживніших мікроводоростей на Землі. Вона містить більше
                хлорофілу, ніж будь-яка інша рослина на планеті, а також колосальну кількість органічного заліза, цинку
                та інших мінералів і вітамінів, необхідних для людини щодня</p>
        </div>
    </div>

    <div class="four-swiper-wrap hide__to_mob">
        <div class="swiper four-swiper">
            <div class="swiper-wrapper">
                <div class="swiper-slide four-card1">
                    <div class="swipers__img_card">
                        <picture> <img
                                src="<?php echo get_template_directory_uri() ?>/assets/img/chollera/main_3/1.webp"
                                alt="ЗОЖ" class="four-card-img"></picture>
                    </div>
                    <div class="four-card-overlay">
                        <div class="four-card-title">Підліткам</div>
                        <span class="line__slider"></span>
                        <div class="four-card-desc">Підліткам - для очищення організму, здорової шкіри без висипань,
                            кращої концентрації та енергії у період
                            активного росту.</div>
                    </div>
                </div>
                <div class="swiper-slide four-card1">
                    <div class="swipers__img_card">
                        <picture> <img
                                src="<?php echo get_template_directory_uri() ?>/assets/img/chollera/main_3/2.webp"
                                alt="Схуднення" class="four-card-img"></picture>
                    </div>
                    <div class="four-card-overlay">
                        <div class="four-card-title">Бажаючим схуднути</div>
                        <span class="line__slider"></span>
                        <div class="four-card-desc">Бажаючим схуднути – для прискорення
                            метаболізму, виведення зайвої рідини,
                            розщеплення жирів і насичення без зайвих калорій</div>
                    </div>
                </div>
                <div class="swiper-slide four-card1">
                    <div class="swipers__img_card">
                        <picture> <img
                                src="<?php echo get_template_directory_uri() ?>/assets/img/chollera/main_3/3.webp"
                                alt="Спортсменам" class="four-card-img"></picture>
                    </div>
                    <div class="four-card-overlay">
                        <div class="four-card-title">Людям з порушенням ШКТ</div>
                        <span class="line__slider"></span>
                        <div class="four-card-desc">Людям з порушенням травлення - для
                            відновлення мікрофлори, зменшення
                            запалень, кращого травлення та
                            засвоєння корисних речовин.
                        </div>
                    </div>
                </div>
                <div class="swiper-slide four-card1">
                    <div class="swipers__img_card">
                        <picture> <img
                                src="<?php echo get_template_directory_uri() ?>/assets/img/chollera/main_3/4.webp"
                                alt="Спортсменам" class="four-card-img"></picture>
                    </div>
                    <div class="four-card-overlay">
                        <div class="four-card-title">Жінкам у віці</div>
                        <span class="line__slider"></span>
                        <div class="four-card-desc">
                            Жінкам у віці - для молодості шкіри, зміцнення волосся, нігтів, підтримки гормонального
                            балансу й захисту від передчасного старіння
                        </div>
                    </div>
                </div>

                <div class="swiper-slide four-card1">
                    <div class="swipers__img_card">
                        <picture> <img
                                src="<?php echo get_template_directory_uri() ?>/assets/img/chollera/main_3/5.webp"
                                alt="Спортсменам" class="four-card-img"></picture>
                    </div>
                    <div class="four-card-overlay">
                        <div class="four-card-title">Вагітним</div>
                        <span class="line__slider"></span>
                        <div class="four-card-desc"> Вагітним - для насичення організму залізом, фолієвою кислотою та
                            вітамінами, що підтримують розвиток малюка й здоров'я мами.
                        </div>
                    </div>
                </div>

                <div class="swiper-slide four-card1">
                    <div class="swipers__img_card">
                        <picture> <img
                                src="<?php echo get_template_directory_uri() ?>/assets/img/chollera/main_3/6.webp"
                                alt="Спортсменам" class="four-card-img"></picture>
                    </div>
                    <div class="four-card-overlay">
                        <div class="four-card-title">Вегетаріанцям</div>
                        <span class="line__slider"></span>
                        <div class="four-card-desc">Вегетаріанцям - для повноцінного білка, заліза, B12 та
                            інших поживних речовин,
                            що компенсують можливі дефіцити
                            в рослинному раціоні
                        </div>
                    </div>
                </div>
            </div>




        </div>
        <div class="four-swiper-controls">
            <div class=" four-swiper-prev">
                <img src="<?php echo get_template_directory_uri() ?>/assets/img/chollera/navigator_left.png" alt="prev">
            </div>
            <div class="swiper-pagination"></div>
            <div class="  four-swiper-next">
                <img src="<?php echo get_template_directory_uri() ?>/assets/img/chollera/navigator_right.png"
                    alt="next">
            </div>
        </div>
    </div>


    <div style="display:none;" class="four-swiper-wrap-mobile container">
        <div class="four-card1-mob">
            <img src="<?php echo get_template_directory_uri() ?>/assets/img/chollera/person_1.webp" alt="ЗОЖ"
                class="four-card-img">
            <div class="four-card-overlay">
                <div class="four-card-title">Прихильникам ЗОЖ</div>
                <a class="four-card-link" href="#">Детальніше
                    <span class="icons__arrow"> <svg width="5" height="8" viewBox="0 0 5 8" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M1.63471 7.12114C1.4572 7.29864 1.1694 7.29864 0.991885 7.12114C0.814376 6.94364 0.814376 6.65582 0.991885 6.47832L3.39775 4.07245L0.991885 1.66659C0.814376 1.48907 0.814376 1.20127 0.991885 1.02376C1.1694 0.846247 1.4572 0.846247 1.63471 1.02376L4.36198 3.75103C4.53949 3.92855 4.53949 4.21635 4.36198 4.39386L1.63471 7.12114Z"
                                fill="#81BE33" />
                        </svg>

                    </span>
                </a>
            </div>
        </div>
        <div class="four-card1-mob">
            <img src="<?php echo get_template_directory_uri() ?>/assets/img/chollera/person_2.webp" alt="Схуднення"
                class="four-card-img">
            <div class="four-card-overlay">
                <div class="four-card-title">Бажаючим схуднути</div>
                <a class="four-card-link" href="#">Детальніше <span class="icons__arrow"> <svg width="5" height="8"
                            viewBox="0 0 5 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M1.63471 7.12114C1.4572 7.29864 1.1694 7.29864 0.991885 7.12114C0.814376 6.94364 0.814376 6.65582 0.991885 6.47832L3.39775 4.07245L0.991885 1.66659C0.814376 1.48907 0.814376 1.20127 0.991885 1.02376C1.1694 0.846247 1.4572 0.846247 1.63471 1.02376L4.36198 3.75103C4.53949 3.92855 4.53949 4.21635 4.36198 4.39386L1.63471 7.12114Z"
                                fill="#81BE33" />
                        </svg>

                    </span></a>
            </div>
        </div>
        <div class="four-card1-mob">
            <img src="<?php echo get_template_directory_uri() ?>/assets/img/chollera/person_3.webp" alt="Спортсменам"
                class="four-card-img">
            <div class="four-card-overlay">
                <div class="four-card-title">Спортсменам</div>
                <a class="four-card-link" href="#">Детальніше <span class="icons__arrow"> <svg width="5" height="8"
                            viewBox="0 0 5 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M1.63471 7.12114C1.4572 7.29864 1.1694 7.29864 0.991885 7.12114C0.814376 6.94364 0.814376 6.65582 0.991885 6.47832L3.39775 4.07245L0.991885 1.66659C0.814376 1.48907 0.814376 1.20127 0.991885 1.02376C1.1694 0.846247 1.4572 0.846247 1.63471 1.02376L4.36198 3.75103C4.53949 3.92855 4.53949 4.21635 4.36198 4.39386L1.63471 7.12114Z"
                                fill="#81BE33" />
                        </svg>

                    </span></a>
            </div>
        </div>
        <div class="four-card1-mob">
            <img src="<?php echo get_template_directory_uri() ?>/assets/img/chollera/person_4.webp" alt="Жінкам у віці"
                class="four-card-img">
            <div class="four-card-overlay">
                <div class="four-card-title">Жінкам у віці</div>
                <a class="four-card-link" href="#">Детальніше <span class="icons__arrow"> <svg width="5" height="8"
                            viewBox="0 0 5 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M1.63471 7.12114C1.4572 7.29864 1.1694 7.29864 0.991885 7.12114C0.814376 6.94364 0.814376 6.65582 0.991885 6.47832L3.39775 4.07245L0.991885 1.66659C0.814376 1.48907 0.814376 1.20127 0.991885 1.02376C1.1694 0.846247 1.4572 0.846247 1.63471 1.02376L4.36198 3.75103C4.53949 3.92855 4.53949 4.21635 4.36198 4.39386L1.63471 7.12114Z"
                                fill="#81BE33" />
                        </svg>

                    </span></a>
            </div>
        </div>

        <div class="four-card1-mob">
            <img src="<?php echo get_template_directory_uri() ?>/assets/img/chollera/person_5.webp" alt="Жінкам у віці"
                class="four-card-img">
            <div class="four-card-overlay">
                <div class="four-card-title">Мамам з дітьми</div>
                <a class="four-card-link" href="#">Детальніше <span class="icons__arrow"> <svg width="5" height="8"
                            viewBox="0 0 5 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M1.63471 7.12114C1.4572 7.29864 1.1694 7.29864 0.991885 7.12114C0.814376 6.94364 0.814376 6.65582 0.991885 6.47832L3.39775 4.07245L0.991885 1.66659C0.814376 1.48907 0.814376 1.20127 0.991885 1.02376C1.1694 0.846247 1.4572 0.846247 1.63471 1.02376L4.36198 3.75103C4.53949 3.92855 4.53949 4.21635 4.36198 4.39386L1.63471 7.12114Z"
                                fill="#81BE33" />
                        </svg>

                    </span></a>
            </div>
        </div>


        <div class="four-card1-mob">
            <img src="<?php echo get_template_directory_uri() ?>/assets/img/chollera/person_6.webp" alt="Жінкам у віці"
                class="four-card-img">
            <div class="four-card-overlay">
                <div class="four-card-title">Вегетаріанцям</div>
                <a class="four-card-link" href="#">Детальніше <span class="icons__arrow"> <svg width="5" height="8"
                            viewBox="0 0 5 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M1.63471 7.12114C1.4572 7.29864 1.1694 7.29864 0.991885 7.12114C0.814376 6.94364 0.814376 6.65582 0.991885 6.47832L3.39775 4.07245L0.991885 1.66659C0.814376 1.48907 0.814376 1.20127 0.991885 1.02376C1.1694 0.846247 1.4572 0.846247 1.63471 1.02376L4.36198 3.75103C4.53949 3.92855 4.53949 4.21635 4.36198 4.39386L1.63471 7.12114Z"
                                fill="#81BE33" />
                        </svg>

                    </span></a>
            </div>
        </div>


    </div>
    <div class="block__four__button-wrap">
        <button class="block__four__button" onclick="openPopupForm(event)">ДІЗНАТИСЯ ЧИ ПІДХОДИТЬ ВАМ</button>
    </div>
</section>


<script>
    const fourCardData = [
        {
            img: '<?php echo get_template_directory_uri() ?>/assets/img/chollera/person_1.webp',
            title: 'Підліткам',
            desc: 'Підліткам - для очищення організму, здорової шкіри без висипань, кращої концентрації та енергії у період активного росту.'
        },
        {
            img: '<?php echo get_template_directory_uri() ?>/assets/img/chollera/person_2.webp',
            title: 'Бажаючим схуднути',
            desc: 'Бажаючим схуднути – для прискорення метаболізму, виведення зайвої рідини, розщеплення жирів і насичення без зайвих калорій.'
        },
        {
            img: '<?php echo get_template_directory_uri() ?>/assets/img/chollera/person_3.webp',
            title: 'Людям з порушенням ШКТ',
            desc: 'Людям з порушенням травлення - для відновлення мікрофлори, зменшення запалень, кращого травлення та засвоєння корисних речовин.'
        },
        {
            img: '<?php echo get_template_directory_uri() ?>/assets/img/chollera/person_4.webp',
            title: 'Жінкам у віці',
            desc: 'Жінкам у віці - для молодості шкіри, зміцнення волосся, нігтів, підтримки гормонального балансу й захисту від передчасного старіння'
        },
        {
            img: '<?php echo get_template_directory_uri() ?>/assets/img/chollera/person_5.webp',
            title: 'Вагітним',
            desc: 'Вагітним - для насичення організму залізом, фолієвою кислотою та вітамінами, що підтримують розвиток малюка й здоров\'я мами.'
        },
        {
            img: '<?php echo get_template_directory_uri() ?>/assets/img/chollera/person_6.webp',
            title: 'Вегетаріанцям',
            desc: 'Вегетаріанцям - для повноцінного білка, заліза, B12 та інших поживних речовин, що компенсують можливі дефіцити в рослинному раціоні'
        }
    ];

    document.addEventListener('DOMContentLoaded', function () {
        // Открытие попапа для мобильных карточек
        document.querySelectorAll('.four-swiper-wrap-mobile .four-card-link').forEach(function (btn, idx) {
            btn.addEventListener('click', function (e) {
                e.preventDefault();
                e.stopPropagation();
                openPopup(fourCardData[idx]);
            });
        });

        // Открытие по клику на весь мобильный блок карточки
        document.querySelectorAll('.four-swiper-wrap-mobile .four-card1-mob').forEach(function (card, idx) {
            card.style.cursor = 'pointer';
            card.addEventListener('click', function (e) {
                e.preventDefault();
                openPopup(fourCardData[idx]);
            });
        });

        // Открытие попапа для десктопных карточек (swiper)
        document.querySelectorAll('.four-swiper .four-card1').forEach(function (card, idx) {
            card.addEventListener('click', function (e) {
                e.preventDefault();
                openPopup(fourCardData[idx]);
            });
        });

        // Закрытие попапа
        document.getElementById('fourCardPopupClose').addEventListener('click', function () {
            closePopup();
        });

        // Закрытие по клику на backdrop
        document.getElementById('fourCardPopupBackdrop').addEventListener('click', function (e) {
            if (e.target === this) {
                closePopup();
            }
        });

        // Закрытие по Escape
        document.addEventListener('keydown', function (e) {
            if (e.key === 'Escape') {
                closePopup();
            }
        });
        // Инициализируем слайдер после построения DOM, чтобы не блокировать поток парсинга при скролле
        // и снизить шанс подвисаний на macOS во время достижения секции
        new Swiper('.four-swiper', {
            slidesPerView: 3,
            spaceBetween: 20,
            speed: 400,
            loop: true, // Отключите, если не нужен
            navigation: {
                nextEl: '.four-swiper-next',
                prevEl: '.four-swiper-prev'
            },
            breakpoints: {
                320: {
                    slidesPerView: 1,
                    spaceBetween: 15,
                },
                768: {
                    slidesPerView: 1,
                    spaceBetween: 18,
                },
                1024: {
                    slidesPerView: 3,
                    spaceBetween: 20,
                }
            },
            lazy: {
                loadPrevNext: true,
            },
            on: {
                init: function () {
                    this.update();
                }
            }
        });
    });

    function openPopup(data) {
        const popup = document.getElementById('fourCardPopupBackdrop');
        const img = document.getElementById('fourCardPopupImg');
        const title = document.getElementById('fourCardPopupTitle');
        const desc = document.getElementById('fourCardPopupDesc');

        // Заполняем данные
        img.src = data.img;
        img.alt = data.title;
        title.textContent = data.title;
        desc.textContent = data.desc;

        // Показываем попап
        popup.style.display = 'flex';
        document.body.style.overflow = 'hidden';

        // Добавляем анимацию появления
        popup.querySelector('.popup-container').style.animation = 'popupSlideIn 0.3s ease-out';
    }

    function closePopup() {
        const popup = document.getElementById('fourCardPopupBackdrop');
        popup.style.display = 'none';
        document.body.style.overflow = '';
    }



</script>

<!-- Pop-up для карточки (универсальный, наполняется динамически) -->
<div id="fourCardPopupBackdrop" class="popup-backdrop" style="display: none;">
    <div class="popup-container">
        <button id="fourCardPopupClose" class="popup-close-btn">
            <span>×</span>
        </button>
        <div class="popup-content">
            <div class="popup-image-section">
                <img id="fourCardPopupImg" src="" alt="" class="popup-image">
            </div>
            <div class="popup-text-section">
                <h3 id="fourCardPopupTitle" class="popup-title"></h3>
                <p id="fourCardPopupDesc" class="popup-description"></p>
            </div>
        </div>
    </div>
</div>